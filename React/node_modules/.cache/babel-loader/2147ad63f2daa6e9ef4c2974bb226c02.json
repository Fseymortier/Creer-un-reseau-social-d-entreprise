{"ast":null,"code":"import _defineProperty from \"D:\\\\programmation\\\\Repository Github\\\\Creer-un-reseau-social-d-entreprise\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"D:\\\\programmation\\\\Repository Github\\\\Creer-un-reseau-social-d-entreprise\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"D:\\\\programmation\\\\Repository Github\\\\Creer-un-reseau-social-d-entreprise\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"D:\\\\programmation\\\\Repository Github\\\\Creer-un-reseau-social-d-entreprise\\\\React\\\\src\\\\components\\\\post\\\\com.js\";\nimport React, { useState, useEffect } from \"react\";\nimport ComServices from \"../../services/com.service\";\nimport AuthService from \"../../services/auth.service\";\nimport \"../../styles/com.css\";\nvar Com = function Com(_ref) {\n  var id = _ref.id;\n  var currentUser = AuthService.getCurrentUser();\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    message = _useState2[0],\n    setMessage = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    coms = _useState4[0],\n    setComs = _useState4[1];\n  var _useState5 = useState(\"\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    com = _useState6[0],\n    setCom = _useState6[1];\n  useEffect(function () {\n    getComs();\n  }, []);\n  function getComs() {\n    var response = ComServices.getAll(id);\n    console.log(\"coucou\");\n    setComs(response);\n  }\n  function contentChange(event) {\n    var _event$target = event.target,\n      name = _event$target.name,\n      value = _event$target.value;\n    setCom(_objectSpread({}, com, _defineProperty({}, name, value))); // on change add new object in post from the value name\n  }\n\n  function createCom(e) {\n    e.preventDefault();\n    setMessage(\"\");\n    var data = {\n      author: currentUser.nickname,\n      postId: id,\n      content: com.content\n    };\n    ComServices.create(data).then(function (data) {\n      setMessage(\"Commentaire créer avec succès\");\n      return data;\n    }).catch(function (error) {\n      var resMessage = error.response.data.message;\n      setMessage(resMessage);\n    });\n    getComs();\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container_com flex\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"flex form_com\",\n    contentype: \"multipart/form-data\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"label_com\",\n    htmlFor: \"content\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 17\n    }\n  }, \"Commenter :\", /*#__PURE__*/React.createElement(\"textarea\", {\n    id: \"content\",\n    type: \"text\",\n    className: \"txt_com\",\n    onChange: contentChange,\n    name: \"content\",\n    value: com.content,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 21\n    }\n  })), message && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    role: \"alert\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 21\n    }\n  }, message), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn\",\n    onClick: createCom,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, \"Ajouter\")), coms && coms.map(function (com) {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"items_coms flex\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"coms_authors\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 25\n      }\n    }, com.author, \" \\xE0 commenter:\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"coms_content\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 25\n      }\n    }, com.content));\n  }));\n};\nexport default Com;","map":{"version":3,"names":["React","useState","useEffect","ComServices","AuthService","Com","_ref","id","currentUser","getCurrentUser","_useState","_useState2","_slicedToArray","message","setMessage","_useState3","_useState4","coms","setComs","_useState5","_useState6","com","setCom","getComs","response","getAll","console","log","contentChange","event","_event$target","target","name","value","_objectSpread","_defineProperty","createCom","e","preventDefault","data","author","nickname","postId","content","create","then","catch","error","resMessage","createElement","className","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","contentype","htmlFor","type","onChange","role","onClick","map"],"sources":["D:/programmation/Repository Github/Creer-un-reseau-social-d-entreprise/React/src/components/post/com.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport ComServices from \"../../services/com.service\";\r\nimport AuthService from \"../../services/auth.service\";\r\nimport \"../../styles/com.css\";\r\n\r\nconst Com = ({ id }) => {\r\n    const currentUser = AuthService.getCurrentUser();\r\n    const [message, setMessage] = useState(\"\");\r\n    const [coms, setComs] = useState([]);\r\n    const [com, setCom] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        getComs();\r\n    }, []);\r\n\r\n    function getComs() {\r\n        const response = ComServices.getAll(id);\r\n        console.log(\"coucou\");\r\n        setComs(response);\r\n    }\r\n    function contentChange(event) {\r\n        const { name, value } = event.target;\r\n        setCom({ ...com, [name]: value }); // on change add new object in post from the value name\r\n    }\r\n    function createCom(e) {\r\n        e.preventDefault();\r\n        setMessage(\"\");\r\n        var data = {\r\n            author: currentUser.nickname,\r\n            postId: id,\r\n            content: com.content,\r\n        };\r\n        ComServices.create(data)\r\n            .then((data) => {\r\n                setMessage(\"Commentaire créer avec succès\");\r\n                return data;\r\n            })\r\n            .catch((error) => {\r\n                const resMessage = error.response.data.message;\r\n                setMessage(resMessage);\r\n            });\r\n        getComs();\r\n    }\r\n    return (\r\n        <div className=\"container_com flex\">\r\n            <form className=\"flex form_com\" contentype=\"multipart/form-data\">\r\n                <label className=\"label_com\" htmlFor=\"content\">\r\n                    Commenter :\r\n                    <textarea\r\n                        id=\"content\"\r\n                        type=\"text\"\r\n                        className=\"txt_com\"\r\n                        onChange={contentChange}\r\n                        name=\"content\"\r\n                        value={com.content}\r\n                    />\r\n                </label>\r\n                {message && (\r\n                    <div className=\"alert alert-danger\" role=\"alert\">\r\n                        {message}\r\n                    </div>\r\n                )}\r\n                <button className=\"btn\" onClick={createCom}>\r\n                    Ajouter\r\n                </button>\r\n            </form>\r\n            {coms &&\r\n                coms.map((com) => (\r\n                    <span className=\"items_coms flex\">\r\n                        <p className=\"coms_authors\">\r\n                            {com.author} à commenter:\r\n                        </p>\r\n                        <p className=\"coms_content\">{com.content}</p>\r\n                    </span>\r\n                ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Com;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}