{"ast":null,"code":"import _slicedToArray from \"G:\\\\Programmation\\\\Formation_Dev\\\\Projet_7\\\\groupomania\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"G:\\\\Programmation\\\\Formation_Dev\\\\Projet_7\\\\groupomania\\\\React\\\\src\\\\components\\\\auth\\\\Login.js\";\n\nimport React, { useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Form from 'react-validation/build/form';\nimport Input from 'react-validation/build/input';\nimport CheckButton from 'react-validation/build/button';\nimport AuthService from '../../services/auth.service';\nimport '../../styles/Auth.css';\n\nvar required = function required(value) {\n  if (!value) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-danger\",\n      role: \"alert\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 12,\n        columnNumber: 13\n      }\n    }, \"This field is required!\");\n  }\n};\n\nvar Login = function Login() {\n  var navigate = useNavigate();\n  var form = useRef();\n  var checkBtn = useRef();\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      message = _useState6[0],\n      setMessage = _useState6[1];\n\n  function onChangeEmail(e) {\n    var email = e.target.value;\n    setEmail(email);\n  }\n\n  function onChangePassword(e) {\n    var password = e.target.value;\n    setPassword(password);\n  }\n\n  function handleLogin(e) {\n    e.preventDefault();\n    setMessage('');\n    form.current.validateAll();\n\n    if (checkBtn.current.context._errors.length === 0) {\n      AuthService.login(email, password).then(function () {\n        navigate('/posts');\n        window.location.reload();\n      }, function (error) {\n        var resMessage = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n        setMessage(resMessage);\n      });\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container_form\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    className: \"form_login\",\n    onSubmit: handleLogin,\n    ref: form,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container_login\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"//ssl.gstatic.com/accounts/ui/avatar_2x.png\",\n    alt: \"profile-img\",\n    className: \"profile_img\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"label_login\",\n    htmlFor: \"email\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 21\n    }\n  }, \"E-mail\", /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    className: \"input_login\",\n    name: \"email\",\n    value: email,\n    onChange: onChangeEmail,\n    validations: [required],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"label_login\",\n    htmlFor: \"password\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, \"Mot de passe\", /*#__PURE__*/React.createElement(Input, {\n    type: \"password\",\n    className: \"input_login\",\n    name: \"password\",\n    value: password,\n    onChange: onChangePassword,\n    validations: [required],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn_login\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 25\n    }\n  }, \"Se connecter\"))), message && /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 29\n    }\n  }, message), /*#__PURE__*/React.createElement(CheckButton, {\n    style: {\n      display: 'none'\n    },\n    ref: checkBtn,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  })));\n};\n\nexport default Login;","map":{"version":3,"names":["React","useState","useRef","useNavigate","Form","Input","CheckButton","AuthService","required","value","Login","navigate","form","checkBtn","email","setEmail","password","setPassword","message","setMessage","onChangeEmail","e","target","onChangePassword","handleLogin","preventDefault","current","validateAll","context","_errors","length","login","then","window","location","reload","error","resMessage","response","data","toString","display"],"sources":["G:/Programmation/Formation_Dev/Projet_7/groupomania/React/src/components/auth/Login.js"],"sourcesContent":["import React, { useState, useRef } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport Form from 'react-validation/build/form'\r\nimport Input from 'react-validation/build/input'\r\nimport CheckButton from 'react-validation/build/button'\r\nimport AuthService from '../../services/auth.service'\r\nimport '../../styles/Auth.css'\r\n\r\nconst required = value => {\r\n    if (!value) {\r\n        return (\r\n            <div className=\"alert alert-danger\" role=\"alert\">\r\n                This field is required!\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst Login = () => {\r\n    let navigate = useNavigate()\r\n    const form = useRef()\r\n    const checkBtn = useRef()\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [message, setMessage] = useState('')\r\n\r\n    function onChangeEmail(e) {\r\n        const email = e.target.value\r\n        setEmail(email)\r\n    }\r\n    function onChangePassword(e) {\r\n        const password = e.target.value\r\n        setPassword(password)\r\n    }\r\n    function handleLogin(e) {\r\n        e.preventDefault()\r\n        setMessage('')\r\n        form.current.validateAll()\r\n        if (checkBtn.current.context._errors.length === 0) {\r\n            AuthService.login(email, password).then(\r\n                () => {\r\n                    navigate('/posts')\r\n                    window.location.reload()\r\n                },\r\n                error => {\r\n                    const resMessage =\r\n                        (error.response &&\r\n                            error.response.data &&\r\n                            error.response.data.message) ||\r\n                        error.message ||\r\n                        error.toString()\r\n                    setMessage(resMessage)\r\n                }\r\n            )\r\n        }\r\n    }\r\n    return (\r\n        <div className=\"container_form\">\r\n            <Form className=\"form_login\" onSubmit={handleLogin} ref={form}>\r\n                <div className=\"container_login\">\r\n                    <img\r\n                        src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\r\n                        alt=\"profile-img\"\r\n                        className=\"profile_img\"\r\n                    />\r\n                    <label className=\"label_login\" htmlFor=\"email\">\r\n                        E-mail\r\n                        <Input\r\n                            type=\"text\"\r\n                            className=\"input_login\"\r\n                            name=\"email\"\r\n                            value={email}\r\n                            onChange={onChangeEmail}\r\n                            validations={[required]}\r\n                        />\r\n                    </label>\r\n                    <label className=\"label_login\" htmlFor=\"password\">\r\n                        Mot de passe\r\n                        <Input\r\n                            type=\"password\"\r\n                            className=\"input_login\"\r\n                            name=\"password\"\r\n                            value={password}\r\n                            onChange={onChangePassword}\r\n                            validations={[required]}\r\n                        />\r\n                    </label>\r\n                    <button className=\"btn_login\">\r\n                        <span>Se connecter</span>\r\n                    </button>\r\n                </div>\r\n                {message && <div>{message}</div>}\r\n                <CheckButton style={{ display: 'none' }} ref={checkBtn} />\r\n            </Form>\r\n        </div>\r\n    )\r\n}\r\nexport default Login\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}