{"ast":null,"code":"import _defineProperty from \"D:\\\\programmation\\\\Repository Github\\\\Creer-un-reseau-social-d-entreprise\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"D:\\\\programmation\\\\Repository Github\\\\Creer-un-reseau-social-d-entreprise\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"D:\\\\programmation\\\\Repository Github\\\\Creer-un-reseau-social-d-entreprise\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"D:\\\\programmation\\\\Repository Github\\\\Creer-un-reseau-social-d-entreprise\\\\React\\\\src\\\\components\\\\post\\\\AddPost.js\";\nimport React, { useState } from \"react\";\nimport PostDataService from \"../../services/PostService\";\nimport AuthService from \"../../services/auth.service\";\nimport \"../../styles/AddPost.css\";\nvar AddPost = function AddPost() {\n  var currentUser = AuthService.getCurrentUser();\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    post = _useState2[0],\n    setPost = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    message = _useState4[0],\n    setMessage = _useState4[1];\n  var _useState5 = useState(\"\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    selectedFile = _useState6[0],\n    SetSelectedFile = _useState6[1];\n  function handleInputChange(event) {\n    var _event$target = event.target,\n      name = _event$target.name,\n      value = _event$target.value;\n    setPost(_objectSpread({}, post, _defineProperty({}, name, value))); // on change add new object in post from the value name\n  }\n\n  function handleFileSelect(e) {\n    SetSelectedFile(e.target.files[0]);\n  }\n  function savePost(e) {\n    e.preventDefault();\n    setMessage(\"\");\n    var data = {\n      author: currentUser.nickname,\n      title: post.title,\n      description: post.description,\n      imageUrl: selectedFile\n    };\n    PostDataService.create(data).then(function (data) {\n      setMessage(\"Post créer avec succès\");\n      window.location.reload();\n      return data;\n    }).catch(function (error) {\n      var resMessage = error.response.data.message;\n      setMessage(resMessage);\n    });\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container_addpost\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }\n  }, \"Cr\\xE9er un Post\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"container_item_addpost\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"label_addpost\",\n    htmlFor: \"title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 17\n    }\n  }, \"Titre:\", /*#__PURE__*/React.createElement(\"textarea\", {\n    type: \"text\",\n    className: \"textarea_addpost\",\n    id: \"title\",\n    required: true,\n    value: post.title,\n    onChange: handleInputChange,\n    name: \"title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"label_addpost\",\n    htmlFor: \"description\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }\n  }, \"Description:\", /*#__PURE__*/React.createElement(\"textarea\", {\n    type: \"text\",\n    className: \"textarea_addpost\",\n    id: \"description\",\n    required: true,\n    value: post.description,\n    onChange: handleInputChange,\n    name: \"description\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"label_addpost\",\n    htmlFor: \"imageUrl\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }, \"Image:\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    name: \"imageUrl\",\n    id: \"imageUrl\",\n    onChange: handleFileSelect,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: savePost,\n    className: \"btn\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, \"Ajouter le post\")), message && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    role: \"alert\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, message));\n};\nexport default AddPost;","map":{"version":3,"names":["React","useState","PostDataService","AuthService","AddPost","currentUser","getCurrentUser","_useState","_useState2","_slicedToArray","post","setPost","_useState3","_useState4","message","setMessage","_useState5","_useState6","selectedFile","SetSelectedFile","handleInputChange","event","_event$target","target","name","value","_objectSpread","_defineProperty","handleFileSelect","e","files","savePost","preventDefault","data","author","nickname","title","description","imageUrl","create","then","window","location","reload","catch","error","resMessage","response","createElement","className","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","type","id","required","onChange","onClick","role"],"sources":["D:/programmation/Repository Github/Creer-un-reseau-social-d-entreprise/React/src/components/post/AddPost.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport PostDataService from \"../../services/PostService\";\r\nimport AuthService from \"../../services/auth.service\";\r\nimport \"../../styles/AddPost.css\";\r\n\r\nconst AddPost = () => {\r\n    const currentUser = AuthService.getCurrentUser();\r\n    const [post, setPost] = useState(\"\");\r\n    const [message, setMessage] = useState(\"\");\r\n    const [selectedFile, SetSelectedFile] = useState(\"\");\r\n\r\n    function handleInputChange(event) {\r\n        const { name, value } = event.target;\r\n        setPost({ ...post, [name]: value }); // on change add new object in post from the value name\r\n    }\r\n    function handleFileSelect(e) {\r\n        SetSelectedFile(e.target.files[0]);\r\n    }\r\n    function savePost(e) {\r\n        e.preventDefault();\r\n        setMessage(\"\");\r\n        var data = {\r\n            author: currentUser.nickname,\r\n            title: post.title,\r\n            description: post.description,\r\n            imageUrl: selectedFile,\r\n        };\r\n        PostDataService.create(data)\r\n            .then((data) => {\r\n                setMessage(\"Post créer avec succès\");\r\n                window.location.reload();\r\n                return data;\r\n            })\r\n            .catch((error) => {\r\n                const resMessage = error.response.data.message;\r\n                setMessage(resMessage);\r\n            });\r\n    }\r\n    return (\r\n        <div className=\"container_addpost\">\r\n            <h1 className=\"title\">Créer un Post</h1>\r\n            <form className=\"container_item_addpost\">\r\n                <label className=\"label_addpost\" htmlFor=\"title\">\r\n                    Titre:\r\n                    <textarea\r\n                        type=\"text\"\r\n                        className=\"textarea_addpost\"\r\n                        id=\"title\"\r\n                        required\r\n                        value={post.title}\r\n                        onChange={handleInputChange}\r\n                        name=\"title\"\r\n                    />\r\n                </label>\r\n                <label className=\"label_addpost\" htmlFor=\"description\">\r\n                    Description:\r\n                    <textarea\r\n                        type=\"text\"\r\n                        className=\"textarea_addpost\"\r\n                        id=\"description\"\r\n                        required\r\n                        value={post.description}\r\n                        onChange={handleInputChange}\r\n                        name=\"description\"\r\n                    />\r\n                </label>\r\n                <label className=\"label_addpost\" htmlFor=\"imageUrl\">\r\n                    Image:\r\n                    <input\r\n                        type=\"file\"\r\n                        name=\"imageUrl\"\r\n                        id=\"imageUrl\"\r\n                        onChange={handleFileSelect}\r\n                    />\r\n                </label>\r\n                <button onClick={savePost} className=\"btn\">\r\n                    Ajouter le post\r\n                </button>\r\n            </form>\r\n            {message && (\r\n                <div className=\"alert alert-danger\" role=\"alert\">\r\n                    {message}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\nexport default AddPost;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}